{
  "match": [
    {
      "path": [
        "/api/{api_id}/*"
      ],
      "method": [
        "GET"
      ]
    }
  ],
  "handle": [
    {
      "handler": "reverse_proxy",
      "rewrite": {
        "path_regexp": [
          {
            "find": "/api/{api_id}/path/",
            "replace": "/path/"
          }
        ],
        "method": "GET"
      },
      "headers": {
        "request": {
          "set": {
            "X-Real-IP": ["{http.request.remote.host}"],
            "X-Forwarded-For": ["{http.request.remote.host}"],
            "X-Forwarded-Proto": ["{http.request.scheme}"],
            "X-Veil-Key": [""]
          },
          "add": {
            "X-Veil-User": ["{http.request.header.Authorization}"],
            "X-Veil-Request-ID": ["{http.request.uuid}"]
          },
          "delete": [
            "Authorization"
          ]
        }
      },
      "upstreams": [
        {
          "dial": "localhost:8081"
        }
      ]
    }
  ]
}
