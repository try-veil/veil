{
	"admin": {
		"listen": "0.0.0.0:2019"
	},
	"logging": {
		"logs": {
			"default": {
				"level": "DEBUG",
				"exclude": [
					"http.log.access.log0"
				]
			},
			"log0": {
				"writer": {
					"output": "stderr"
				},
				"encoder": {
					"format": "console"
				},
				"level": "DEBUG",
				"include": [
					"http.log.access.log0"
				]
			}
		}
	},
	"apps": {
		"http": {
			"servers": {
				"srv0": {
					"listen": [
						":2020"
					],
					"routes": [
						{
							"group": "group4",
							"match": [
								{
									"path": [
										"/api/v1/products/*"
									]
								}
							],
							"handle": [
								{
									"handler": "subroute",
									"routes": [
										{
											"handle": [
												{
													"db_path": "./veil.db",
													"handler": "veil_handler",
													"subscription_key": "X-Subscription-Key"
												},
												{
													"handler": "reverse_proxy",
													"upstreams": [
														{
															"dial": "localhost:8081"
														}
													]
												}
											]
										}
									]
								}
							]
						},
						{
							"group": "group4",
							"match": [
								{
									"path": [
										"/api/v1/orders/*"
									]
								}
							],
							"handle": [
								{
									"handler": "subroute",
									"routes": [
										{
											"handle": [
												{
													"db_path": "./veil.db",
													"handler": "veil_handler",
													"subscription_key": "X-Subscription-Key"
												},
												{
													"handler": "reverse_proxy",
													"upstreams": [
														{
															"dial": "localhost:8082"
														}
													]
												}
											]
										}
									]
								}
							]
						},
						{
							"group": "group4",
							"match": [
								{
									"path": [
										"/api/v1/users/*"
									]
								}
							],
							"handle": [
								{
									"handler": "subroute",
									"routes": [
										{
											"handle": [
												{
													"db_path": "./veil.db",
													"handler": "veil_handler",
													"subscription_key": "X-Subscription-Key"
												},
												{
													"handler": "reverse_proxy",
													"upstreams": [
														{
															"dial": "localhost:8080"
														}
													]
												}
											]
										}
									]
								}
							]
						},
						{
							"group": "group4",
							"match": [
								{
									"path": [
										"/veil/api/*"
									]
								}
							],
							"handle": [
								{
									"handler": "subroute",
									"routes": [
										{
											"handle": [
												{
													"handler": "rewrite",
													"strip_path_prefix": "/veil/api"
												}
											]
										},
										{
											"handle": [
												{
													"handler": "reverse_proxy",
													"upstreams": [
														{
															"dial": "localhost:2020"
														}
													]
												}
											]
										}
									]
								}
							]
						},
						{
							"handle": [
								{
									"db_path": "./veil.db",
									"handler": "veil_handler",
									"subscription_key": "X-Subscription-Key"
								}
							]
						}
					],
					"automatic_https": {
						"disable": true
					},
					"logs": {
						"default_logger_name": "log0"
					}
				}
			}
		}
	}
}
